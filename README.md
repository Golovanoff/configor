# configor

[![Stars](https://img.shields.io/github/stars/khorevaa/configor.svg?label=Github%20%E2%98%85&a)](https://github.com/khorevaa/configor/stargazers)
[![Release](https://img.shields.io/github/tag/khorevaa/configor.svg?label=Last%20release&a)](https://github.com/khorevaa/configor/releases)
[![Открытый чат проекта https://gitter.im/EvilBeaver/oscript-library](https://badges.gitter.im/khorevaa/configor.png)](https://gitter.im/EvilBeaver/oscript-library)

[![Build Status](https://travis-ci.org/khorevaa/configor.svg?branch=master)](https://travis-ci.org/khorevaa/configor)
[![Coverage Status](https://coveralls.io/repos/github/khorevaa/configor/badge.svg?branch=master)](https://coveralls.io/github/khorevaa/configor?branch=master)

# Библиотека для работы с конфигурационными файлами в формате json, yaml

Данная библиотека позволяет работать с конфигурационными файлами с помощью предварительного описания требуемой конфигурации.
А так же без опписания. Получение параметров по ключам вида `Настройки.Глобальные.НастройкиПрокси.Сервер`.
Обеспечивает подстановку значение друг в друга и чтение вложенных файлов настроек

## Мотивация

Сравнительная таблица

[ReadParams](https://github.com/Stepa86/ReadParams)
[Params](https://github.com/artbear/params)

|                                                                                                                                      | *Configor*       | ReadParams | Params |
|--------------------------------------------------------------------------------------------------------------------------------------|------------------|------------|--------|
| Чтение файлов в формате json                                                                                                         | ✓                | ✓          | ✓      |
| Чтение файлов в формате yaml/yml                                                                                                     | ✓ (в разработке) | ✓          | ✓      |
| Чтение файлов в произвольном формате (свой класс чтения)                                                                             | ✓                | ✓          | ✓      |
| Выполнение подстановок при чтении                                                                                                    |                  | ✓          | ✓      |
| Чтение переменных окружения                                                                                                          |                  | ✓          | ✓      |
| Чтение параметров командной строки                                                                                                   |                  | ✓          | ✓      |
| Запись параметров в прочитанный файл                                                                                                 |                  | ✓          | ✓      |
| Чтение переменных окружения                                                                                                          |                  | ✓          | ✓      |
| Выгрузка результата чтения в класс параметров                                                                                        |                  | ✓          | ✓      |
| Поддержка деревовидных структур параметров `Настройки.Глобальные.Пользователь` и `Настройки.Локальные.Пользователь` разные параметры |                  | ✓          | ✓      |
| Доступ к вложенным параметра в формате `Настройки.Глобальные`                                                                        |                  | ✓          | ✓      |

## Пример работы:

* Чтение параметров из файла
```bsl
    
    // Пример файла настроек
    //{
    //    'Настройки': {
    //        "Глобальные": {
    //            "НастройкиПрокси":{
    //                "Сервер": "localhost",
    //                "Порт": "8080"
    //            }
    //        }
    //        
    //    }
    //}
    

    МенеджерПараметров = Новый МенеджерЧтенияПараметров();
	МенеджерПараметров.УстановитьФайлПараметров("Путь/К/Файлу");
	МенеджерПараметров.Прочитать();

    ПроксиСервер = МенеджерПараметров.Параметр("Настройки.Глобальные.НастройкиПрокси.Сервер")

    Сообщить(ПроксиСервер);

```

* Версия из строки
```bsl

Версия = Версии.ВерсияИзСтроки("1.0.0");

Сообщить(Версия.ВСтроку());

```
* Максимальная версия из массива версий
```bsl

МассивВерсий = Новый Массив();
МассивВерсий.Добавить(ВерсияИзСтроки("1.0.2"));
МассивВерсий.Добавить(ВерсияИзСтроки("1.0.3"));
МассивВерсий.Добавить(ВерсияИзСтроки("1.0.4"));

МаксимальнаяВерсия = Версии.МаксимальнаяИзМассива(МассивВерсий);

Сообщить(МаксимальнаяВерсия.ВСтроку());

```
